<!DOCTYPE html>
<html>

<body>

    <h2>JavaScript Geolocation API</h2>
    <p>Click the button to get your coordinates.</p>

    <button onclick="getLocation()">Try It</button>

    <p id="demo"></p>

    <script>
        const x = document.getElementById("demo");

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(showPosition);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            x.innerHTML = "Latitude: " + position.coords.latitude +
                "<br>Longitude: " + position.coords.longitude;

            // Send coordinates to the server-side script for saving
            saveCoordinatesOnServer(position.coords.latitude, position.coords.longitude);
        }

        function saveCoordinatesOnServer(latitude, longitude) {
            // Create a new XMLHttpRequest object
            const xhr = new XMLHttpRequest();

            // Define the PHP script URL on the server
            const url = 'save_coordinates.php';

            // Create a JSON object with the coordinates
            const data = JSON.stringify({ latitude, longitude });

            // Configure the request
            xhr.open('POST', url, true);
            xhr.setRequestHeader('Content-type', 'application/json');

            // Send the request
            xhr.send(data);

            // Handle the response (optional)
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // Handle the response here if needed
                }
            };
        }
    </script>

</body>

</html>
